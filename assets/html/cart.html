<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="/assets/bootstrap/bootstrap.bundle.min.js">
    <link rel="stylesheet" href="/assets/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/cart.css">
    <link rel="stylesheet" href="/assets/css/layout/header.css">
    <link rel="stylesheet" href="/assets/css/layout/footer.css">

    <link rel="stylesheet" href="/assets/fonts/themify-icons/themify-icons.css">
    <link rel="stylesheet" href="/assets/fonts/fontawesome-free-6.6.0-web/css/all.min.css">

    <script src="/assets/scripts/add_layout/add_layout.js" defer></script>
</head>
<body>
    <div id="header-placeholder"></div>
    <main style="margin-top: 65px;">
        <div class="container-fuild bg-light">
            <div class="container pt-5 cart">
                <div class="row">
                    <!-- Cart Items List -->
                    <div class="col-md-8 pb-4">
                        <h5 class="mb-3 bg-white cart-select-all">
                            <input type="checkbox" id="select-all" class="me-1"> Chọn tất cả (0)
                            <i class="fa-solid fa-trash text-secondary float-end p-3 me-3 mt-1"></i>
                        </h5>
            
                        <!-- Cart Item 1 -->
                        <div class="cart-item bg-white">
                            <div class="d-flex align-items-center">
                                <input type="checkbox" class="me-3 item-checkbox">
                                <img src="/assets/images/product/pig/TOP_01.png" alt="TOP 1 Image" class="me-3" width="150px" height="150px">
                                <div class="" style="width: 530px;">
                                    <div class="float-start cart-item-text">
                                        <h6 class="mt-3" style="font-size: 18px;">Dùng cho heo con từ 05 ngày tuổi đến 35 ngày tuổi</h6>
                                        <h6 class="text-p text-center">Mã SP: TOP 01</h6>
                                    </div>
                                    <div class="float-end">
                                        <p class="price mt-4 me-3">290.000 đ </p>
                                        <p class="original-price ms-1" style="margin-top: -13px;">490.000 đ</p>
                                    </div>
                                </div>
                                <div class="d-flex flex align-items-center ms-2">
                                    <div class="quantity-selector">
                                        <button class="btn btn-outline-secondary" type="button" onclick="updateQuantity(this, -1)">-</button>
                                        <input type="text" class="form-control text-center quantity-input" value="1">
                                        <button class="btn btn-outline-secondary" type="button" onclick="updateQuantity(this, 1)">+</button>
                                    </div>
                                    <i class="fa-solid fa-trash text-secondary float-end mt-1 ms-3"></i>
                                </div>
                            </div>
                        </div>
            
                        <!-- Cart Item 2 -->
                        <div class="cart-item bg-white">
                            <div class="d-flex align-items-center">
                                <input type="checkbox" class="me-3 item-checkbox">
                                <img src="/assets/images/product/pig/TOP_02.png" alt="TOP 2 Image" class="me-3" width="150px" height="150px">
                                <div class="" style="width: 530px;">
                                    <div class="float-start cart-item-text">
                                        <h6 class="mt-3" style="font-size: 18px;"> Dùng cho heo con tập ăn đến 20kg</h6>
                                        <h6 class="text-p text-center">Mã SP: TOP 02</h6>
                                    </div>
                                    <div class="float-end">
                                        <p class="price mt-4 me-3">490.000 đ </p>
                                        <!-- <p class="original-price ms-1" style="margin-top: -13px;">12.990.000 đ</p> -->
                                    </div>
                                </div>
                                <div class="d-flex flex align-items-center ms-2">
                                    <div class="quantity-selector">
                                        <button class="btn btn-outline-secondary" type="button" onclick="updateQuantity(this, -1)">-</button>
                                        <input type="text" class="form-control text-center quantity-input" value="1">
                                        <button class="btn btn-outline-secondary" type="button" onclick="updateQuantity(this, 1)">+</button>
                                    </div>
                                    <i class="fa-solid fa-trash text-secondary float-end mt-1 ms-3"></i>
                                </div>
                            </div>
                        </div>
    
                        <!-- Cart Item 3 -->
                        <div class="cart-item bg-white">
                            <div class="d-flex align-items-center">
                                <input type="checkbox" class="me-3 item-checkbox">
                                <img src="/assets/images/product/pig/TOP_03.png" alt="TOP 3 Image" class="me-3" width="150px" height="150px">
                                <div class="" style="width: 530px;">
                                    <div class="float-start cart-item-text">
                                        <h6 class="mt-3" style="font-size: 18px;">Dùng cho heo thịt giống tốt từ 12 – 30kg</h6>
                                        <h6 class="text-p text-center">Mã SP: TOP 03</h6>
                                    </div>
                                    <div class="float-end">
                                        <p class="price mt-4 me-3">290.000 đ </p>
                                        <p class="original-price ms-1" style="margin-top: -13px;">490.000 đ</p>
                                    </div>
                                </div>
                                <div class="d-flex flex align-items-center ms-2">
                                    <div class="quantity-selector">
                                        <button class="btn btn-outline-secondary" type="button" onclick="updateQuantity(this, -1)">-</button>
                                        <input type="text" class="form-control text-center quantity-input" value="1">
                                        <button class="btn btn-outline-secondary" type="button" onclick="updateQuantity(this, 1)">+</button>
                                    </div>
                                    <i class="fa-solid fa-trash text-secondary float-end mt-1 ms-3"></i>
                                </div>
                            </div>
                        </div>
            
                        <!-- Add more items as needed -->
                    </div>
            
                    <!-- Order Summary -->
                    <div class="col-md-4">
                        <div class="cart-summary bg-white">
                            <h6>Thông tin đơn hàng</h6>
                            <p>Tổng tiền: <span class="float-end" id="total-price">0 đ</span></p>
                            <div class="line-gray mb-2"></div>
                            <p>Tổng khuyến mãi: <span class="float-end">0 đ</span></p>
                            <p>Phí vận chuyển: <span class="float-end">Miễn phí</span></p>
                            <div class="line-gray mb-2"></div>
                            <p>Cần thanh toán: <span class="float-end" id="final-price">0 đ</span></p>
                            <button class="btn btn-danger mt-3">Xác nhận đơn</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <div id="footer-placeholder"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.getElementById("select-all").addEventListener("change", function() {
        let checkboxes = document.querySelectorAll(".item-checkbox");
        checkboxes.forEach(cb => cb.checked = this.checked);
        updateTotalPrice();
    });

    document.querySelectorAll(".item-checkbox, .option-checkbox").forEach(item => {
        item.addEventListener("change", updateTotalPrice);
    });

    function updateQuantity(button, change) {
        let quantityInput = button.parentNode.querySelector(".quantity-input");
        let newValue = parseInt(quantityInput.value) + change;
        if (newValue >= 1) {
            quantityInput.value = newValue;
            updateTotalPrice();
        }
    }

    function updateTotalPrice() {
        let total = 0;
        document.querySelectorAll(".cart-item").forEach(item => {
            if (item.querySelector(".item-checkbox").checked) {
                let quantity = parseInt(item.querySelector(".quantity-input").value);
                let basePrice = parseInt(item.querySelector(".price").textContent.replace(/[^0-9]/g, ""));
                total += basePrice * quantity;
                item.querySelectorAll(".option-checkbox:checked").forEach(option => {
                    total += parseInt(option.getAttribute("data-price")) * quantity;
                });
            }
        });
        document.getElementById("total-price").textContent = total.toLocaleString("vi-VN") + " đ";
        document.getElementById("final-price").textContent = total.toLocaleString("vi-VN") + " đ";
    }
</script>
</body>
</html>
